# http基础
## web的请求流程
1. 请求访问文本或图像等资源的一端称为客户端，而提供资源响应的一 端称为服务器端
2. 客户端先发出请求，服务器端后回复响应
## TCP/IP协议族与http协议
### http协议
专业说法是超文本传输（转移）协议
1. 属于应用层
2. 生成针对目标服务器的请求报文
3. http不保存状态，所以例如登录信息会引入cookie技术
#### 请求报文![[request.png]]
```	方法   请求访问的资源的URI   htttp版本	Host：可选的请求首部字段	```
内容实体
比如：（表示访问某服务器的/index.htm）
GET /index.htm HTTP/1.1 
Host: hackr.jp
1. 如果是对服务器本身发起请求，可以用 * 代替URI
2. 由上至下分为请求行、请求头（多个请求首部字段（4种，请求有3种））、空行（CR+LF）<必须有，来分割前后>、请求体
#### 响应报文：![[response.png]]
1. 包含状态行、响应头（请求头）、空行、响应体
#### HTTP方法
1. GET：获取资源，响应返回请求的资源
2. POST：传输实体主体，响应返回接收数据后的结果
3. PUT：传输文件，响应返回状态码
4. HEAD：获取响应报文首部
5. DWELETE：删除文件
6. OPTIONS：询问支持方法，响应返回支持的方法，这里URI就要用 * 代替
7. PATCH：在请求中定义了一个描述修改的实体的集合，如果被请求修改的资源不存在，服务器可能会创建一个新的资源
### Cookie
1. 在第一次发送请求是，没有cookie的，在响应报文中返回
2. 响应报文中的请求头以：`Set-Cookie:`开头
3. 请求报文中在请求头`HOST：`下面
### 状态码
- `2XX` 表示成功
    - 200 正常处理
    - 204 处理成功，但是没有资源返回
    - 206 表示客户端进行了范围的请求，服务端也成功执行了这个部分的请求
- `3XX` 表示需要重定向，表明浏览器需要执行某些特殊的处理以正确处理请求
    - 301 表示资源的位置永久更换了
    - 302 表示的是临时更换了位置
- `4XX` 表示客户端错误
    - 400 表示请求报文内存在语法错误
    - 401 表示认证失败，页面需要认证信息
    - 403 表示访问被服务端拒绝了
    - 404 表示服务器上没有请求的资源
- `5XX` 表示服务器的错误
    - 500 表示服务端本身的问题
    - 503 表示服务端暂时处于超载或者停机维护

## TCP/IP协议族
1. 它是规范不同硬件、操作系统如何互相通信的协议，因为双方要互相通信就必须使用相同的方法
2. 它是各种协议族的总称
3. 分层：应用、传输、网络、数据链路
	1. 应用层：决定提供应用服务时的通信，http属于该层
	2. 传输层：管两计算机间的数据传输，包含TCP、UDP
	3. 网络层：选择数据包的物流路线
	4. 链路层：处理网络连接的硬件部分
4. 大概一个请求就按照上述的顺序封装再拆解，发送端封装（每过一层打上一个这一层的首部信息），接收端拆解
### IP协议
负责传输，不是ip地址
1. 位于网络层
2. IP地址可变，而MAC地址是网卡所属的固定地址，基本不改
3. ARP协议可以通过IP地址反查对应的MAC地址
4. 不能直接发送给对方，需要经过中转站，这个中转站判断送向哪个中转站或接收端
### TCP协议
1. 属于传输层，提供字节流服务
2. 这个服务把大块数据分割成小块（报文段为单位的数据包），TCP还能确认数据是否送达
3. TCP确认数据送达过程（三次握手等）：
	1. 发送带SYN的数据包
	2. 接收端回送带SYN/ACK的数据包
	3. 发送端再发送带ACK的数据包
### DNS协议
1. 位于应用层，提供域名到IP地址的解析服务
2. 来自之前了解：我们所记的网址，或者说url，在计算机中访问时是使用的一串数字（ip地址），DNS服务就提供这二者之间的互查
## 专业名词解析或翻译
1. 客户端（client）
2. URL
	统一资源定位符，一般是主机地址+端口号+主机上目录或文件地址，熟知的网址是域名，经过解析也是url，被包含在URI之内
3. URI
	统一资源标识符
	暂时理解成具体到某一个具体页面或者资源的网址（）
4. 请求/响应头
	三种首部字段的集合
# json
## 基本概念
JavaScript对象表示法，一种轻量级文本数据交换格式
## go语言中的json
### 序列化和反序列化
* 序列化（Marshal）：内容转化为指定格式
* 反序列化（UnMarshal）：...
### go程序中使用json
 导入包`encoding/json`
 1. `json.Marshal()` 的函数签名是 `func Marshal(v interface{}) ([]byte, error)`返回的实际是一个字节切片，而error用作错误处理
    在web中原函数名加个forHTML
    转换后更好读的形式加Indent，该函数有两个额外的字符串参数用于表示每一行输出的前缀和每一个层级的缩进
 2. `UnMarshal()` 的函数签名是 `func Unmarshal(data []byte, v interface{}) error`
    可以用map（未知json数据）或者结构体（提前知道json数据）来接
	 1. 其中结构体的可以在类型后再加数据用来表示在json中的名字
	 2. map的定义key为string，值为interface{}，接收数据要用一个接口变量
	 3. 使用类型断言访问这个数据`m := f.(map[string]interface{})`
# go中构建http请求
[练习](study-jounal\week3\homework\http-theft-bank-start-template-main)
